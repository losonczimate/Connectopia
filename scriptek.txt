DROP TABLE Komment;
DROP TABLE Bejegyzes;
DROP TABLE Fenykep;
DROP TABLE CsoportTagok;
DROP TABLE EsemenyTagok;
DROP TABLE Ismerosok;
DROP TABLE Esemeny;
DROP TABLE Csoport;
DROP TABLE Uzenet;
DROP TABLE Felhasznalo;

-- Felhasznalo tábla
CREATE TABLE Felhasznalo (
  felh_id INTEGER PRIMARY KEY,
  felh_email VARCHAR(255) NOT NULL,
  felh_jelszo VARCHAR(255) NOT NULL,
  felh_szulinap DATE NOT NULL,
  felh_nev VARCHAR(255) NOT NULL
);

-- Csoport tábla
CREATE TABLE Csoport(
  csoport_id INTEGER PRIMARY KEY,
  csoport_nev VARCHAR(255) NOT NULL,
  csoport_leiras VARCHAR(1000) NOT NULL
);

-- Esemény tábla
CREATE TABLE Esemeny (
  esemeny_id INTEGER PRIMARY KEY,
  nev VARCHAR(255) NOT NULL,
  leiras VARCHAR(1000) NOT NULL,
  idopont DATE NOT NULL
);

-- Fénykép tábla
CREATE TABLE Fenykep (
  kep_id INTEGER PRIMARY KEY,
  kep_url VARCHAR(1000) NOT NULL,
  kep_neve VARCHAR(1000) NOT NULL
);

-- Bejegyzes tabla
CREATE TABLE Bejegyzes(
  bejegyzes_id INTEGER PRIMARY KEY,
  bejegyzes_leiras VARCHAR(1000) NOT NULL,
  bejegyzes_idopont DATE NOT NULL,
  fenykep_id INTEGER,
  felhid INTEGER NOT NULL,
  csoportid INTEGER,
  esemenyid INTEGER,
  FOREIGN KEY (felhid) REFERENCES Felhasznalo(felh_id),
  FOREIGN KEY (csoportid) REFERENCES Csoport(csoport_id),
  FOREIGN KEY (esemenyid) REFERENCES Esemeny(esemeny_id),
  FOREIGN KEY (fenykep_id) REFERENCES Fenykep(kep_id)
);

-- Ismerosok kapcsolótábla
CREATE TABLE Ismerosok (
  felh_id1 INTEGER NOT NULL,
  felh_id2 INTEGER NOT NULL,
  FOREIGN KEY (felh_id1) REFERENCES Felhasznalo(felh_id),
  FOREIGN KEY (felh_id2) REFERENCES Felhasznalo(felh_id),
  PRIMARY KEY (felh_id1, felh_id2)
);

-- Tagok kapcsolótábla Csoportokhoz
CREATE TABLE CsoportTagok (
  felhid INTEGER NOT NULL,
  csoportid INTEGER NOT NULL,
  FOREIGN KEY (felhid) REFERENCES Felhasznalo(felh_id),
  FOREIGN KEY (csoportid) REFERENCES Csoport(csoport_id),
  PRIMARY KEY (felhid, csoportid)
);

-- Tagok kapcsolótábla Esemenyekhez
CREATE TABLE EsemenyTagok (
  felhid INTEGER NOT NULL,
  esemenyid INTEGER NOT NULL,
  FOREIGN KEY (felhid) REFERENCES Felhasznalo(felh_id),
  FOREIGN KEY (esemenyid) REFERENCES Esemeny(esemeny_id),
  PRIMARY KEY (felhid, esemenyid)
);

-- Komment tábla
CREATE TABLE Komment (
  komment_id INTEGER PRIMARY KEY,
  kommentelo_id INTEGER NOT NULL,
  idopont DATE NOT NULL,
  szoveg VARCHAR(1000) NOT NULL,
  bejegyzesid INTEGER NOT NULL,
  FOREIGN KEY (kommentelo_id) REFERENCES Felhasznalo(felh_id),
  FOREIGN KEY (bejegyzesid) REFERENCES Bejegyzes(bejegyzes_id)
);

-- Üzenet tábla
CREATE TABLE Uzenet (
    uzenet_id INT PRIMARY KEY,
    tartalom VARCHAR(1000),
    kuldes_ideje DATE,
    kuldo INT REFERENCES Felhasznalo(felh_id),
    fogado INT REFERENCES Felhasznalo(felh_id)
);






